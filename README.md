# SentinelSync (ç£çŸ³è¿ç»´) - AI é©±åŠ¨çš„é›†ä¸­åŒ–è¿ç»´å¹³å°

**é¡¹ç›®å®šä½ï¼š** ä¸€ä¸ªé›†æˆæ•°æ®å¤‡ä»½ã€èµ„äº§ç›‘æ§ã€é›†ä¸­æ—¥å¿—å’Œ AI é©±åŠ¨çš„é¢„æµ‹æ€§è¿ç»´èƒ½åŠ›çš„é›†ä¸­åŒ–ç®¡ç†ç³»ç»Ÿã€‚

## ğŸ“š æ–‡æ¡£

å®Œæ•´æ–‡æ¡£ç°å·²ä¸Šçº¿!è®¿é—®æˆ‘ä»¬çš„åœ¨çº¿æ–‡æ¡£:

- **è‹±æ–‡æ–‡æ¡£** - [SentinelSync Documentation](https://sentinelsync-docs.example.com)
- **ä¸­æ–‡æ–‡æ¡£** - [SentinelSync æ–‡æ¡£](https://sentinelsync-docs.example.com/zh/)

æˆ–è€…æœ¬åœ°æŸ¥çœ‹:
```bash
cd docs
npm install
npm run docs:dev
```

## 1. æ¶æ„æ¦‚è§ˆ

ç³»ç»Ÿé‡‡ç”¨**å®¢æˆ·ç«¯-æœåŠ¡å™¨ (Agent-Control Plane)** æ¶æ„ï¼Œä½¿ç”¨ **Go** å¤„ç†é«˜æ€§èƒ½ I/Oï¼Œ**Python** å¤„ç† AI åˆ†æå’Œ API æœåŠ¡ï¼Œ**RabbitMQ** ä½œä¸ºäº‹ä»¶æ€»çº¿ï¼Œ**PostgreSQL** ä½œä¸ºæ ¸å¿ƒçŠ¶æ€å­˜å‚¨ã€‚

## 2. æŠ€æœ¯æ ˆé€Ÿè§ˆ

| é¢†åŸŸ | æŠ€æœ¯æ ˆ | å…³é”®ç»„ä»¶ |
| :--- | :--- | :--- |
| **é«˜æ€§èƒ½æ‰§è¡Œ** | Go (Golang) | Agent å®¢æˆ·ç«¯ã€æ—¥å¿—å¤„ç†å™¨ã€‚ |
| **AI/åˆ†æ/API** | Python (FastAPI/ML Libraries) | é›†ä¸­ç®¡ç†æœåŠ¡å™¨çš„ APIã€AI å¼•æ“ã€‚ |
| **æ¶ˆæ¯é˜Ÿåˆ—** | RabbitMQ | äº‹ä»¶æµã€ä»»åŠ¡è°ƒåº¦ã€è¿œç¨‹å‘½ä»¤åˆ†å‘ã€‚ |
| **æ•°æ®åº“** | PostgreSQL | èµ„äº§ã€é…ç½®ã€å¤‡ä»½çŠ¶æ€ã€æ—¥å¿—ã€AI æ´å¯Ÿçš„æŒä¹…åŒ–ã€‚ |
| **å‰ç«¯** | Vue 3 + Vite | ç°ä»£åŒ– Web UIï¼Œæä¾›ä»ªè¡¨ç›˜å’Œé…ç½®ç•Œé¢ã€‚ |
| **éƒ¨ç½²** | Docker / Docker Compose | ç»Ÿä¸€ç¯å¢ƒå’Œè·¨å¹³å°éƒ¨ç½²ã€‚ |

---

## 3. æ ¸å¿ƒåŠŸèƒ½çŸ©é˜µ

| åŠŸèƒ½æ¨¡å— | å…³é”®ç‰¹æ€§ | å…³è”ç»„ä»¶ |
| :--- | :--- | :--- |
| **æ•°æ®å¤‡ä»½** | å®æ—¶ç›‘æ§ï¼ˆ`fsnotify`ï¼‰ï¼Œæµå¼å“ˆå¸Œè®¡ç®—ï¼Œå¼‚æ­¥é˜Ÿåˆ—ä¼ è¾“ã€‚ | Go Agent, Hasher, Transporter |
| **èµ„äº§ç®¡ç†** | Agent è‡ªåŠ¨æ³¨å†Œã€å¿ƒè·³æ£€æµ‹ã€ç‰ˆæœ¬è·Ÿè¸ªã€‚ | Go Agent, Python API, PostgreSQL |
| **è¿œç¨‹è¿ç»´** | Web UI è§¦å‘è¿œç¨‹å‘½ä»¤ï¼ˆå¦‚å¼ºåˆ¶åŒæ­¥ã€é‡å¯æœåŠ¡ï¼‰ã€‚ | Vue UI $\leftrightarrow$ Python API $\leftrightarrow$ RabbitMQ $\rightarrow$ Go Agent |
| **é›†ä¸­æ—¥å¿—** | å®æ—¶æ”¶é›†æ‰€æœ‰ Agent çš„ç³»ç»Ÿäº‹ä»¶å’Œé”™è¯¯æ—¥å¿—ã€‚ | Go Agent $\rightarrow$ MQ $\rightarrow$ Log Processor $\rightarrow$ PostgreSQL |
| **AI æ™ºèƒ½åˆ†æ** | å¼‚å¸¸æ£€æµ‹ã€å¤‡ä»½æ€§èƒ½é¢„æµ‹ã€å®¹é‡è§„åˆ’å»ºè®®ã€‚ | Python AI/ML æ¨¡å—ï¼ŒPostgreSQL |

---

## 4. è¯¦ç»†ç»„ä»¶èŒè´£ä¸ç›®å½•ç»“æ„

é¡¹ç›®ä»£ç åº“ç»“æ„å¦‚ä¸‹ï¼š

```
/SentinelSync-AI-OpsPlatform
â”œâ”€â”€ .github/                  # CI/CD & Contribution Guidelines
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ ci.yml            # æŒç»­é›†æˆé…ç½®
â”‚
â”œâ”€â”€ docs/                     # æ‰€æœ‰æŠ€æœ¯æ–‡æ¡£
â”‚   â””â”€â”€ architecture.md       # æ¶æ„è®¾è®¡æ–‡æ¡£
â”‚
â”œâ”€â”€ scripts/                  # éƒ¨ç½²è„šæœ¬å’Œç¯å¢ƒé…ç½®
â”‚   â”œâ”€â”€ development/          # å¼€å‘ç¯å¢ƒé…ç½®å’Œè„šæœ¬
â”‚   â”‚   â”œâ”€â”€ docker-compose.yml
â”‚   â”‚   â”œâ”€â”€ sql/              # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
â”‚   â”‚   â””â”€â”€ scripts/          # å¼€å‘ç¯å¢ƒæ“ä½œè„šæœ¬
â”‚   â””â”€â”€ production/           # ç”Ÿäº§ç¯å¢ƒé…ç½®å’Œè„šæœ¬
â”‚       â”œâ”€â”€ docker-compose.yml
â”‚       â”œâ”€â”€ sql/              # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
â”‚       â””â”€â”€ deploy.ps1        # éƒ¨ç½²è„šæœ¬
â”‚
â”œâ”€â”€ services/                 # é›†ä¸­å¼ Go åå°æœåŠ¡ (RabbitMQ ä»»åŠ¡å¤„ç†å™¨)
â”‚   â”œâ”€â”€ hasher/               # å¤‡ä»½å“ˆå¸Œè®¡ç®— Worker (consumes metadata.change)
â”‚   â”‚   â””â”€â”€ hasher.go
â”‚   â”œâ”€â”€ transporter/          # å¤‡ä»½æ•°æ®ä¼ è¾“ Worker (consumes transfer.needed)
â”‚   â”‚   â””â”€â”€ transporter.go
â”‚   â””â”€â”€ log_processor/        # æ—¥å¿—æ¶ˆè´¹å¹¶å†™å…¥ PostgreSQL
â”‚       â””â”€â”€ processor.go
â”‚
â”œâ”€â”€ agent/                    # å®¢æˆ·ç«¯ Go Agent æºä»£ç  (éƒ¨ç½²åœ¨æ‰€æœ‰ç›®æ ‡æœºå™¨)
â”‚   â”œâ”€â”€ cmd/
â”‚   â”‚   â””â”€â”€ main.go           # Agent ä¸»ç¨‹åºå…¥å£
â”‚   â”œâ”€â”€ fsmonitor/            # åŸºäº fsnotify çš„å®æ—¶æ–‡ä»¶ç³»ç»Ÿç›‘æ§æ¨¡å—
â”‚   â”‚   â””â”€â”€ monitor.go
â”‚   â”œâ”€â”€ remote_executor/      # æ¥æ”¶å’Œå¤„ç†æ¥è‡ª RabbitMQ çš„è¿œç¨‹æ§åˆ¶æŒ‡ä»¤
â”‚   â”‚   â””â”€â”€ executor.go
â”‚   â””â”€â”€ backup_logic/         # æ ¸å¿ƒå¤‡ä»½ I/O é€»è¾‘å’ŒçŠ¶æ€ç®¡ç†
â”‚       â””â”€â”€ backup.go
â”‚
â”œâ”€â”€ control_plane/            # ç®¡ç†æ§åˆ¶å¹³é¢ (Python FastAPI + Vue 3)
â”‚   â”œâ”€â”€ management_server/    # Python Backend (FastAPI)
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ api/          # REST å’Œ WebSocket æ¥å£
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ ml_engine/    # AI/ML æ ¸å¿ƒæ¨¡å— (åˆ†ææ—¥å¿—ã€é¢„æµ‹æ€§èƒ½ã€ä¼˜åŒ–èµ„æºé…ç½®)
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ __init__.py
â”‚   â”‚   â”‚   â””â”€â”€ db/           # PostgreSQL æ•°æ®åº“äº¤äº’å±‚
â”‚   â”‚   â”‚       â””â”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ main.py           # FastAPI åº”ç”¨å…¥å£ç‚¹
â”‚   â”‚
â”‚   â””â”€â”€ web_ui/               # Vue 3 å‰ç«¯ç•Œé¢ (dashboards, asset management, AI insights)
â”‚       â””â”€â”€ index.html
â”‚
â”œâ”€â”€ README.md                 # é¡¹ç›®æ€»è§ˆä¸å¿«é€Ÿå…¥é—¨
â””â”€â”€ go.work                   # Go æ¨¡å—ç®¡ç†æ–‡ä»¶ (å¤šæ¨¡å—ç®¡ç†)
```

### 4.1 å„ç›®å½•è¯¦ç»†è¯´æ˜

#### `/agent` - Go å®¢æˆ·ç«¯ä»£ç†ç¨‹åº
- **èŒè´£**: éƒ¨ç½²åœ¨æ‰€æœ‰ç›®æ ‡æœºå™¨ä¸Š,è´Ÿè´£æœ¬åœ°æ–‡ä»¶ç›‘æ§ã€å¤‡ä»½æ‰§è¡Œã€å¿ƒè·³æ£€æµ‹ã€æ¥æ”¶è¿œç¨‹å‘½ä»¤
- **å…³é”®æ¨¡å—**:
  - `cmd/`: Agent ä¸»ç¨‹åºå…¥å£ (main.go)
  - `fsmonitor/`: ä½¿ç”¨ fsnotify ç›‘æ§æ–‡ä»¶ç³»ç»Ÿå˜æ›´äº‹ä»¶ (monitor.go)
  - `backup_logic/`: æ ¸å¿ƒå¤‡ä»½ I/O é€»è¾‘å’ŒçŠ¶æ€ç®¡ç† (backup.go)
  - `remote_executor/`: ä» RabbitMQ æ¥æ”¶è¿œç¨‹æ§åˆ¶å‘½ä»¤å¹¶æ‰§è¡Œ (executor.go)

#### `/services` - é›†ä¸­å¼ Go åå°ä»»åŠ¡å¤„ç†å™¨
- **èŒè´£**: ä½œä¸º RabbitMQ æ¶ˆè´¹è€…,å¤„ç†å¼‚æ­¥ä»»åŠ¡,é¿å…é˜»å¡ Agent
- **å…³é”®æœåŠ¡**:
  - `hasher/`: è®¡ç®—æ–‡ä»¶å“ˆå¸Œå€¼ (consumes `metadata.change` é˜Ÿåˆ—) - hasher.go
  - `transporter/`: ä¼ è¾“å¤‡ä»½æ•°æ® (consumes `transfer.needed` é˜Ÿåˆ—) - transporter.go
  - `log_processor/`: æ¶ˆè´¹æ—¥å¿—äº‹ä»¶å¹¶å†™å…¥ PostgreSQL - processor.go

#### `/control_plane` - ç®¡ç†æ§åˆ¶å¹³é¢
- **èŒè´£**: æä¾›é›†ä¸­ç®¡ç†ã€AI æ™ºèƒ½åˆ†æã€Web UI ç•Œé¢
- **management_server/**:
  - Python FastAPI åº”ç”¨,æä¾› REST API å’Œ WebSocket æ¥å£
  - `main.py`: FastAPI åº”ç”¨å…¥å£
  - `src/api/`: æ§åˆ¶å™¨å±‚,å¤„ç† HTTP/WebSocket è¯·æ±‚ (__init__.py)
  - `src/ml_engine/`: AI/ML æ¨¡å—,å¼‚å¸¸æ£€æµ‹ã€æ€§èƒ½é¢„æµ‹ã€å®¹é‡è§„åˆ’ (__init__.py)
  - `src/db/`: æ•°æ®åº“äº¤äº’å±‚,ä½¿ç”¨ SQLAlchemy/Pydantic (__init__.py)
- **web_ui/**:
  - Vue 3 + Vite å‰ç«¯åº”ç”¨
  - `index.html`: å‰ç«¯é¡µé¢å…¥å£
  - ä»ªè¡¨ç›˜ã€èµ„äº§ç®¡ç†ã€AI æ´å¯Ÿå±•ç¤º

#### `/scripts` - éƒ¨ç½²è„šæœ¬å’Œç¯å¢ƒé…ç½®
- **èŒè´£**: æä¾›å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒçš„é…ç½®ã€è„šæœ¬å’Œéƒ¨ç½²å·¥å…·
- **å…³é”®ç›®å½•**:
  - `development/`: å¼€å‘ç¯å¢ƒé…ç½®ï¼ŒåŒ…å«:
    - `docker-compose.yml`: å¼€å‘ç¯å¢ƒçš„å®¹å™¨ç¼–æ’é…ç½®
    - `sql/`: æ•°æ®åº“åˆå§‹åŒ–å’Œè¿ç§»è„šæœ¬
    - `scripts/`: å¼€å‘ç¯å¢ƒå¯åŠ¨ã€åœæ­¢å’Œé‡å¯è„šæœ¬
    - `.env.template`: ç¯å¢ƒå˜é‡æ¨¡æ¿æ–‡ä»¶
  - `production/`: ç”Ÿäº§ç¯å¢ƒé…ç½®ï¼ŒåŒ…å«:
    - `docker-compose.yml`: ç”Ÿäº§ç¯å¢ƒçš„å®¹å™¨ç¼–æ’é…ç½®
    - `sql/`: ç”Ÿäº§ç¯å¢ƒæ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
    - `deploy.ps1`: è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬
    - `.env.template`: ç”Ÿäº§ç¯å¢ƒç¯å¢ƒå˜é‡æ¨¡æ¿

#### `/docs` - æŠ€æœ¯æ–‡æ¡£
- `architecture.md`: æ¶æ„è®¾è®¡æ–‡æ¡£,è¯¦ç»†è¯´æ˜å„ç»„ä»¶èŒè´£å’Œé€šä¿¡æµç¨‹

## 5. å…³é”®åŸºç¡€è®¾æ–½ä¸æµç¨‹

### 5.1 æ•°æ®åº“è®¾è®¡ (PostgreSQL)

æ ¸å¿ƒè¡¨åŒ…æ‹¬ï¼š`file_metadata` (å¤‡ä»½çŠ¶æ€)ã€`agent_assets` (èµ„äº§ä¿¡æ¯)ã€`agent_config` (è¿œç¨‹é…ç½®)ã€`system_logs` (èšåˆæ—¥å¿—)ã€`ai_insights` (AI åˆ†æç»“æœ)ã€‚

### 5.2 æ¶ˆæ¯é˜Ÿåˆ— (RabbitMQ)

ç”¨äºè§£è€¦å’Œå¼‚æ­¥é€šä¿¡ï¼Œç¡®ä¿é«˜å¯é æ€§ã€‚

| é˜Ÿåˆ—/äº¤æ¢æœº | è·¯ç”±é”® | ç”Ÿäº§è€… | æ¶ˆè´¹è€… |
| :--- | :--- | :--- | :--- |
| `metadata_in` | `metadata.change` | Go Agent (A) | Go Hasher Service |
| `transfer_out` | `transfer.needed` | Go Hasher Service | Go Transporter Service |
| `log_events` | `log.event` | Go Agent | Go Log Processor |
| `control_commands` | `command.remote` | Python API | Go Agent (Remote Executor) |

### 5.3 æ€§èƒ½ä¸å¯é æ€§ä¿è¯

1.  **I/O éš”ç¦»ï¼š** Go Agent è´Ÿè´£æ‰€æœ‰æœ¬åœ° I/Oï¼Œç¡®ä¿æ–‡ä»¶æ“ä½œä¸é˜»å¡æ§åˆ¶é¢çš„ API å“åº”ã€‚
2.  **æµå¼å¤„ç†ï¼š** æ‰€æœ‰å¤§æ–‡ä»¶å“ˆå¸Œå’Œä¼ è¾“é‡‡ç”¨åˆ†å—æµå¼å¤„ç†ï¼Œæœ€å°åŒ–å†…å­˜å ç”¨ã€‚
3.  **AI é©±åŠ¨çš„ä¼˜åŒ–ï¼š** AI æ¨¡å—åˆ†æå†å²æ•°æ®ï¼Œä¼˜åŒ–èµ„æºåˆ†é…ï¼ˆå¦‚è°ƒæ•´ Transporter çš„å¹¶å‘æ•°ï¼Œæˆ–æ ¹æ®é¢„æµ‹è°ƒæ•´å¤‡ä»½çª—å£ï¼‰ã€‚
4.  **æŒä¹…åŒ–ï¼š** å…³é”®ä»»åŠ¡å’ŒçŠ¶æ€å‡é€šè¿‡æŒä¹…åŒ–æ¶ˆæ¯å’Œäº‹åŠ¡æ€§ DB æ“ä½œä¿è¯æ•°æ®ä¸ä¸¢å¤±ã€‚